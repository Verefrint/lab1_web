const mongoose = require('mongoose');
const Service = require('./service'); // Adjust path as needed

// MongoDB connection URL - use environment variable in production
const mongoUrl = process.env.MONGO_URL || 'mongodb://root:rootpassword@localhost:27017/legal_services?authSource=admin';

async function connectToDatabase() {
    try {
        await mongoose.connect(mongoUrl, {
            useNewUrlParser: true,
            useUnifiedTopology: true
        });
        console.log('Connected to MongoDB');
    } catch (error) {
        console.error('MongoDB connection error:', error);
        process.exit(1);
    }
}

const servicesData = [
    {
        id: "Р",
        title: "Регистрация ООО",
        description: "Полная юридическая регистрация Общества с Ограниченной Ответственностью 'под ключ'",
        price: "от 15 000 руб.",
        link: "#corporate",
        keywords: "регистрация ооо создание фирмы открытие компании учредительные документы",
        category: "Корпоративное право",
        details: {
            summary: "Полная юридическая регистрация ООО 'под ключ' с гарантией соблюдения всех требований законодательства.",
            features: [
                "Подготовка уникального пакета документов",
                "Проверка названия на уникальность",
                "Определение оптимального размера уставного капитала",
                "Выбор кодов ОКВЭД",
                "Регистрация в налоговых органах",
                "Изготовление печати (по желанию)",
                "Открытие расчетного счета"
            ],
            fullDescription: `
                <p>Наши юристы сопровождают весь процесс регистрации ООО от подготовки документов до получения готового пакета. Средний срок выполнения - 3 рабочих дня после подачи документов.</p>
                <p>Мы предлагаем 3 пакета услуг:</p>
                <ol>
                    <li><strong>Базовый</strong> (15 000 руб.) - стандартная регистрация с минимальным набором услуг</li>
                    <li><strong>Оптима</strong> (25 000 руб.) - включает открытие счета и изготовление печати</li>
                    <li><strong>Премиум</strong> (40 000 руб.) - полное сопровождение + годовая юридическая поддержка</li>
                </ol>
            `,
            packages: [
                {
                    name: "Базовый",
                    price: "15 000 руб.",
                    features: [
                        "Стандартная регистрация",
                        "Минимальный набор услуг",
                        "Подготовка документов"
                    ]
                },
                {
                    name: "Оптима",
                    price: "25 000 руб.",
                    features: [
                        "Открытие счета",
                        "Изготовление печати",
                        "Полный пакет документов"
                    ]
                },
                {
                    name: "Премиум",
                    price: "40 000 руб.",
                    features: [
                        "Полное сопровождение",
                        "Годовая юридическая поддержка",
                        "Приоритетное обслуживание"
                    ]
                }
            ]
        }
    },
    {
        id: "ИП",
        title: "Регистрация ИП",
        description: "Быстрая и легальная регистрация Индивидуального Предпринимателя",
        price: "от 5 000 руб.",
        link: "#entrepreneur",
        keywords: "регистрация ип открытие ип индивидуальный предприниматель самозанятость",
        category: "Предпринимательское право",
        details: {
            summary: "Профессиональная регистрация ИП без очередей и с гарантией положительного результата.",
            features: [
                "Консультация по выбору системы налогообложения",
                "Подготовка заявления Р21001",
                "Подача документов в налоговую",
                "Получение документов о регистрации",
                "Консультация по ведению бизнеса"
            ],
            fullDescription: `
                <p>Регистрация ИП занимает 3 рабочих дня после подачи документов. Мы берем на себя все формальности.</p>
                <p>Дополнительные услуги:</p>
                <ul>
                    <li>Открытие расчетного счета - 3 000 руб.</li>
                    <li>Подключение онлайн-кассы - 7 000 руб.</li>
                    <li>Консультация по налогам - 2 500 руб./час</li>
                </ul>
            `,
            packages: [
                {
                    name: "Стандарт",
                    price: "5 000 руб.",
                    features: [
                        "Подготовка документов",
                        "Подача в налоговую",
                        "Получение документов"
                    ]
                },
                {
                    name: "Бизнес-старт",
                    price: "12 000 руб.",
                    features: [
                        "Регистрация ИП",
                        "Открытие счета",
                        "Консультация по налогам (1 час)"
                    ]
                }
            ]
        }
    },
    {
        id: "Д",
        title: "Договорная работа",
        description: "Разработка и проверка договоров любой сложности",
        price: "от 7 000 руб.",
        link: "#contracts",
        keywords: "договор составление проверка анализ юридическая экспертиза",
        category: "Гражданское право",
        details: {
            summary: "Профессиональная разработка и юридическая экспертиза договоров для защиты ваших интересов.",
            features: [
                "Анализ договора на соответствие законодательству",
                "Выявление рисков и неблагоприятных условий",
                "Разработка индивидуальных условий",
                "Подготовка протокола разногласий",
                "Консультация по спорным положениям"
            ],
            fullDescription: `
                <p>Мы работаем со всеми видами договоров:</p>
                <ul>
                    <li>Договоры купли-продажи</li>
                    <li>Договоры аренды</li>
                    <li>Трудовые договоры</li>
                    <li>Договоры подряда</li>
                    <li>Договоры оказания услуг</li>
                    <li>Лицензионные соглашения</li>
                </ul>
                <p>Срок выполнения: от 1 рабочего дня в зависимости от сложности договора.</p>
            `,
            packages: [
                {
                    name: "Проверка",
                    price: "7 000 руб.",
                    features: [
                        "Юридический анализ договора",
                        "Выявление рисков",
                        "Рекомендации по изменениям"
                    ]
                },
                {
                    name: "Разработка",
                    price: "15 000 руб.",
                    features: [
                        "Создание договора с нуля",
                        "Учет всех пожеланий клиента",
                        "2 бесплатные правки"
                    ]
                }
            ]
        }
    },
    {
        id: "Н",
        title: "Налоговые споры",
        description: "Защита интересов в налоговых спорах и проверках",
        price: "от 25 000 руб.",
        link: "#tax",
        keywords: "налоговые споры проверка фнс оспаривание налоговый адвокат",
        category: "Налоговое право",
        details: {
            summary: "Профессиональная защита в налоговых спорах и сопровождение налоговых проверок.",
            features: [
                "Анализ налоговых рисков",
                "Сопровождение выездных и камеральных проверок",
                "Подготовка возражений на акты проверок",
                "Представление интересов в суде",
                "Обжалование решений налоговых органов"
            ],
            fullDescription: `
                <p>Наши специалисты помогут:</p>
                <ul>
                    <li>Снизить доначисления по результатам проверок</li>
                    <li>Избежать привлечения к ответственности</li>
                    <li>Вернуть излишне уплаченные налоги</li>
                    <li>Оспорить неправомерные решения ФНС</li>
                </ul>
                <p>Стоимость определяется индивидуально в зависимости от сложности дела.</p>
            `,
            packages: [
                {
                    name: "Консультация",
                    price: "5 000 руб.",
                    features: [
                        "Анализ документов",
                        "Оценка перспектив спора",
                        "Разработка стратегии защиты"
                    ]
                },
                {
                    name: "Полное сопровождение",
                    price: "от 50 000 руб.",
                    features: [
                        "Комплексная защита",
                        "Представление интересов",
                        "Подготовка всех документов"
                    ]
                }
            ]
        }
    },
    {
        id: "Т",
        title: "Трудовые споры",
        description: "Защита прав работников и работодателей",
        price: "от 10 000 руб.",
        link: "#labor",
        keywords: "трудовые споры увольнение восстановление зарплата компенсация",
        category: "Трудовое право",
        details: {
            summary: "Юридическая помощь в разрешении трудовых конфликтов и защите трудовых прав.",
            features: [
                "Консультации по трудовому законодательству",
                "Подготовка претензий и исковых заявлений",
                "Представление интересов в трудовой инспекции",
                "Сопровождение увольнений",
                "Взыскание задолженности по зарплате"
            ],
            fullDescription: `
                <p>Мы помогаем в следующих ситуациях:</p>
                <ul>
                    <li>Незаконное увольнение</li>
                    <li>Невыплата заработной платы</li>
                    <li>Дискриминация на работе</li>
                    <li>Неправомерные дисциплинарные взыскания</li>
                    <li>Споры о компенсациях</li>
                </ul>
                <p>Успешный опыт ведения дел в трудовых инспекциях и судах.</p>
            `,
            packages: [
                {
                    name: "Консультация",
                    price: "3 000 руб.",
                    features: [
                        "Анализ ситуации",
                        "Разъяснение прав",
                        "Рекомендации по действиям"
                    ]
                },
                {
                    name: "Судебное представительство",
                    price: "от 25 000 руб.",
                    features: [
                        "Подготовка иска",
                        "Участие во всех заседаниях",
                        "Полное сопровождение дела"
                    ]
                }
            ]
        }
    },
    {
        id: "Ж",
        title: "Жилищные споры",
        description: "Решение конфликтов в сфере жилищного права",
        price: "от 12 000 руб.",
        link: "#housing",
        keywords: "жилищные споры выселение вселение раздел квартиры коммунальные платежи",
        category: "Жилищное право",
        details: {
            summary: "Юридическая помощь в разрешении жилищных споров и защите прав собственников.",
            features: [
                "Споры о вселении/выселении",
                "Раздел жилых помещений",
                "Определение порядка пользования",
                "Оспаривание сделок с недвижимостью",
                "Споры с управляющими компаниями"
            ],
            fullDescription: `
                <p>Наши специалисты помогут в следующих ситуациях:</p>
                <ul>
                    <li>Признание права на жилое помещение</li>
                    <li>Выселение бывших членов семьи</li>
                    <li>Раздел лицевых счетов</li>
                    <li>Оспаривание капремонта</li>
                    <li>Споры о коммунальных платежах</li>
                </ul>
                <p>Бесплатная первичная консультация по телефону.</p>
            `,
            packages: [
                {
                    name: "Консультация",
                    price: "2 500 руб.",
                    features: [
                        "Анализ документов",
                        "Оценка перспектив дела",
                        "Рекомендации по стратегии"
                    ]
                },
                {
                    name: "Комплексное ведение",
                    price: "от 30 000 руб.",
                    features: [
                        "Подготовка всех документов",
                        "Представление в суде",
                        "Исполнительное производство"
                    ]
                }
            ]
        }
    }
];

async function seedDatabase() {
    try {
        await connectToDatabase();
        
        // Clear existing data
        await Service.deleteMany({});
        console.log('Cleared existing services');
        
        // Insert new data
        await Service.insertMany(servicesData);
        console.log(`Successfully seeded ${servicesData.length} services`);
        
        // Close connection
        await mongoose.disconnect();
        process.exit(0);
    } catch (error) {
        console.error('Error seeding database:', error);
        process.exit(1);
    }
}

seedDatabase();