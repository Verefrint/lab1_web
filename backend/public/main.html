<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Гестион - Юридическая компания</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="logo-container">
            <h1>Гестион</h1>
            <p>Профессиональные юридические услуги</p>
        </div>
        <div class="auth-container">
            <form action="auth.php" method="post">
                <input type="text" placeholder="Логин" required>
                <input type="password" placeholder="Пароль" required>
                <button type="submit">Войти</button>
                <a href="#">Регистрация</a>
            </form>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <ul class="main-menu">
            <li class="active" ><a href="main.html">Главная</a></li>
            <li><a href="services.html">Услуги</a></li>
            <li><a href="team.html">Команда</a></li>
            <li><a href="contacts.html">Контакты</a></li>
            <li><a href="feedback.html">Отзывы</a></li>
            <li class="search-container">
                <input type="text" placeholder="Поиск...">
                <button type="submit">Найти</button>
            </li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="content-wrapper">
        <!-- Sidebar -->
        <aside class="sidebar">
            <h3>Наши услуги</h3>

            <div class="search-service">
                <h3>Поиск по услугам</h3>
                <form id="service-search-form">
                    <input type="text" id="search-input" placeholder="Введите название или описание услуги">
                    <button type="submit">Найти</button>
                </form>
                <div id="search-results"></div>
            </div>

            <ul>
                <li><a href="#">Корпоративное право</a></li>
                <li><a href="#">Налоговое консультирование</a></li>
                <li><a href="#">Трудовое право</a></li>
                <li><a href="#">Недвижимость и строительство</a></li>
                <li><a href="#">Банкротство</a></li>
                <li><a href="#">Интеллектуальная собственность</a></li>
            </ul>
            
            <div class="sidebar-banner">
                <h4>Бесплатная консультация</h4>
                <p>Первая консультация - бесплатно!</p>
                <button>Записаться</button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main>
            <h2>О компании</h2>
            <hr>
            
            <section class="about-section">
                <img src="static/lawyers.jpg" alt="Наша команда" class="float-left">
                <p>Юридическая компания "Гестион" предоставляет полный спектр юридических услуг для бизнеса и частных клиентов с 2005 года. Наша команда состоит из высококвалифицированных юристов с многолетним опытом работы в различных отраслях права.</p>
                
                <p>Мы гордимся тем, что предлагаем индивидуальный подход к каждому клиенту, гарантируя конфиденциальность и высокое качество услуг. Наши специалисты постоянно повышают квалификацию и следят за изменениями в законодательстве.</p>
                
                <h3>Наши преимущества</h3>
                <ul>
                    <li>Более 15 лет успешной работы</li>
                    <li>Команда из 25+ профессиональных юристов</li>
                    <li>98% выигранных дел</li>
                    <li>Индивидуальный подход к каждому клиенту</li>
                    <li>Прозрачное ценообразование</li>
                </ul>
            </section>
            
            <section class="news-section">
                <h3>Последние новости</h3>
                <article>
                    <h4>Изменения в налоговом законодательстве</h4>
                    <p>С 1 января 2023 года вступают в силу изменения в Налоговый кодекс РФ, касающиеся...</p>
                    <a href="#">Читать далее</a>
                </article>
                <article>
                    <h4>Новые правила регистрации бизнеса</h4>
                    <p>Министерство экономики упростило процедуру регистрации ИП и ООО...</p>
                    <a href="#">Читать далее</a>
                </article>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h4>Контакты</h4>
                <p>г. Москва, ул. Юридическая, 15</p>
                <p>Телефон: +7 (495) 123-45-67</p>
                <p>Email: info@gestion.ru</p>
            </div>
            <div class="footer-section">
                <h4>Режим работы</h4>
                <p>Пн-Пт: 9:00 - 18:00</p>
                <p>Сб: 10:00 - 15:00</p>
                <p>Вс: выходной</p>
            </div>
            <div class="footer-section">
                <h4>Подписаться на новости</h4>
                <form action="/process_newsletter.php" method="post">
                    <input type="email" placeholder="Ваш email" required>
                    <button type="submit">Подписаться</button>
                </form>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 Юридическая компания "Гестион". Все права защищены.</p>
        </div>
    </footer>
    <script>
        document.getElementById('service-search-form').addEventListener('submit', async function(e) {
    e.preventDefault();
    const query = document.getElementById('search-input').value.trim();
    const resultsContainer = document.getElementById('search-results');
    
    if (query.length < 2) {
        resultsContainer.innerHTML = '<p class="no-results">Введите минимум 2 символа</p>';
        return;
    }

    try {
        const response = await fetch('http://localhost:8080/search.php', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            },
            body: JSON.stringify({ query }),
            credentials: 'omit',
            referrerPolicy: 'no-referrer-when-downgrade'
        });

        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
        
        const data = await response.json();
        
        if (data.error) {
            resultsContainer.innerHTML = `<p class="no-results">Ошибка: ${data.error}</p>`;
            return;
        }

        // Обработка результатов
        if (!data.results || data.results.length === 0) {
            resultsContainer.innerHTML = `
                <p class="no-results">По запросу "${query}" ничего не найдено</p>
                <p>Попробуйте изменить запрос</p>
            `;
            return;
        }

        let html = `<p>Найдено услуг: ${data.results.length}</p>`;
        data.results.forEach(service => {
            html += `
                <div class="search-result-item">
                    <h4>${service.title}</h4>
                    <p>${service.description}</p>
                    <p><strong>Стоимость:</strong> ${service.price}</p>
                    <a href="${service.link}" class="service-button">Подробнее</a>
                </div>
            `;
        });
        
        resultsContainer.innerHTML = html;
    } catch (error) {
        console.error('Fetch error:', error);
        resultsContainer.innerHTML = `
            <p class="no-results">Ошибка при выполнении запроса</p>
            <p>${error.message}</p>
        `;
        }
    });
    </script>
</body>
</html>